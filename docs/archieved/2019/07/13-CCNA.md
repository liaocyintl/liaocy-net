---
title: CCNA試験のまとめノート 04 IPアドレスとサブネット
date: 2019-07-13 20:33:00
lang: ja
tags:
    - ノート
    
categories: 
    - 資格試験
    - CCNA
    
---
IPv4アドレス、サブネットワーク、IPアドレッシング、VLSM
<!-- more -->

# IPv4アドレス
## 構成要素
- 階層型アドレス：IPアドレスは32ビット；ネットワーク部とホスト部
  - ネットワーク部：所属するネットワークを示す
  - ホスト部：ネットワークに所属するホストを識別
## アドレスクラス
- クラスA：
  - 第１オクテットの先頭は0に固定（00000000～01111111）
  - 有効な範囲は1.0.0.0　～　126.255.255.255
  - ネットワーク部は8ビット、ホスト部は24ビット；ホスト数は2^24-2=16777214
- クラスB：
  - 第１オクテットの先頭は10に固定（10000000～10111111）
  - 有効な範囲は128.0.0.0　～　191.255.255.255
  - ネットワーク部は16ビット、ホスト部は16ビット；ホスト数は2^16-2=65534
- クラスC：
  - 第１オクテットの先頭は110に固定（11000000～11011111）
  - 有効な範囲は192.0.0.0　～　223.255.255.255
  - ネットワーク部は24ビット、ホスト部は8ビット；ホスト数は2^8-2=254
- クラスD：
  - 第１オクテットの先頭は1110に固定（11100000～11101111）
  - 有効な範囲は224.0.0.0　～　239.255.255.255
  - 224.0.0.0　～　224.0.0.255は同一ネットワーク上でのみ送信され、ルータによって伝送されない。

## 予約済IPアドレス
- ネットワークアドレス
  - 特徴：ホスト部のビットをすべて０
  - 役割：ネットワーク自体を表す
  - 場合：ルータが経路制御するとき
- ブロードキャストアドレス
  - 特徴：ホスト部のビットをすべて１
  - 場合：ネットワーク内すべての端末に送信
- ダイレクトブロードキャストアドレス
  - 定義：受信者が所属していないネットワークへブロードキャストアドレスへ送信
  - 特徴：ルートによる伝送可能
  - 注意：CiscoルータはデフォルトでOFFになっている。
- ループバックアドレス
  - 特徴：第１オクテットが127で始まる（127.0.0.1～127.255.255.254）
  - 役割：機器の自分自身を表す仮想的なアドレス

```
PS C:\> ping 127.255.255.254

正在 Ping 127.255.255.254 具有 32 字节的数据:
来自 127.255.255.254 的回复: 字节=32 时间<1ms TTL=128
来自 127.255.255.254 的回复: 字节=32 时间<1ms TTL=128
来自 127.255.255.254 的回复: 字节=32 时间<1ms TTL=128

```
- 自動設定アドレス APIPA(Automatic Private IP Addressing)
  - 場合：DHCPなどからIPアドレス取得に失敗した場合
  - 範囲：169.254.0.0/16プレフィックス範囲
  - 特徴：ルータによる伝送できない。同一ネットワーク内でのみ通信を行う。
  - 別名：リンクローカルアドレス

## グローバルアドレスとプライベートIPアドレス
- 管理組織：IANA（Internet Assigned Number Authority）
- 目的：IPアドレス枯渴（こかつ）の問題を対応するため
- グローバルIP：インタネットで利用可能
- プライベートIPアドレス：組織内部のネットワークでのみ利用可能
  - 範囲(RFC1918で定義)：
    - クラスA：10.0.0.0 ～ 10.255.255.255
    - クラスB：172.16.0.0 ～ 172.31.255.255
    - クラスC：192.168.0.0 ～ 192.168.255.255
  - NAT：Network Address Translation；送信元アドレスをグローバルIPアドレスに変換；内部ネットワークで使用しているプライベートIPアドレスを、インターネット上で使用可能なグローバルIPアドレスに相互変換する仕組み

## サブネットワーク
- 定義：ある１つのネットワークを複数に分割した小さなネットワークを指す
- 利点：
  - 多くの端末数
  - ブロードキャストドメインを分割可能
  - トラフィックを局所化。パフォーマンス改善
  - 構成柔軟、管理の手間が軽減
  - トラフィック分離、ネットワークセキュリティの適用が容易
- サブネット化
  - 定義：１つのネットワークを小さなサブネットワークに分割
  - 注意：ネットワーク部はIANAによって割り当てられているため変更できない
  - 方法：サブネットワーク部はホスト部のビットから任意のビット長を借りて拡張する。
  - 計算：
    - $${サブネット数} = 2^s$$ (s=サブネットワーク部のビット数)
    - $${ホストアドレス数 = 2^h-2$$ (hはホスト部のビット数)
  - サブネット０、サブネット１の使用
    - TFC950は使用しないようで強く推奨している。
    - しかし全体利用している。
    - サブネット０：ゼロサブネット。サブネット化した時に得られる最初のサブネット
    - サブネット１：サブネット化したとき得られる最後のサブネットを指す。
  - サブネットマスク
    - ナチュラルマスク：
      - クラスA：255.0.0.0
      - クラスB：255.255.0.0
      - クラスC：255.255.255.0
  - プレフィックス(Prefix)長
    - ネットワークアドレスを示すビットの長さを表す
    - 例：「192.168.0.1/24」
    - 別名：CIDR（Classless Inter-Domain Routing）
  
## IPアドレッシングの計算（試験問題）
略

## VLSM
- 概要
  - VLSM（Variable Length Subnet Mask：可変長サブネットワーク）
    - サブネットごとに異なるサブネットマスクを使う技術
    - 利点：接続するコンピューターの台数に応じたサブネットマスクが利用でき、IPアドレスを無駄なく利用できる。
  - FLSM（Fixed Length Subnet Mask：固定長サブネットマスク）
    - 欠点：未使用のアドレスが多い可能