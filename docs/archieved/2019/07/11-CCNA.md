---
title: CCNA試験のまとめノート 02 イーサネット
date: 2019-07-11 11:33:00
lang: ja
tags:
    - ノート
    
categories: 
    - 資格試験
    - CCNA
    
---
イーサネット、CSMA・CD、ネットワーク機器、レイヤ２スイッチンぐ
<!-- more -->

# イーサネットの概要
## 概要
- 標準化：IEEE802.3
- DIXイーサネット
  
## MAC副層とLLC副層
- MAC（Media Access Control）副層
- LLC（Logical Link Control）

## イーサネットフレーム
- 種類：DIXとIEEE 802.3
- フォーマット：
  - 宛先MACアドレス：６バイト；宛先のMACアドレス
  - 送信元MACアドレス：６バイト；送信元のMACアドレス
  - タイプ：２バイト；上位層プロトコルの識別番号。例えばIPv4なら「0x0800」、ARP、IPv6など
  - 長さ/タイプ：２バイト；データフィールドの長さ。
  - データ：４６～１５００バイト；４６バイトに満たない場合0を入れる。
  - 802.2ヘッダ：IEEE802.2規格のサービス識別情報
  - FCS：４バイト。エラーチェックするためのCRC値。

## MACアドレスの構成
- OUI(Organizationally Unique Identifier)：前半の24ビットは機器のベンダを示す。
- 分類
  - ユニキャストMACアドレス：特定ノードへの通信（1対1）に使用
  - マルチキャストMACアドレス：1対N
  - ブロードキャストMACアドレス：1対全

## イーサネットの規格
- イーサネット（10Mb）
- ファストイーサネット（100Mb）
- ギガビットイーサネット（1Gb）
- 10ギガビットイーサネット（10Gb）

# CSMA/CD
## 概要、動作
- CSMA/CD(Carrier Sense Multiple Access with Collision Detection)
- 名前：搬送波感知多重アクセス/衝突（しょうとつ）検出方式
- 役割：複数のホストで共有しているケーブルなどの伝送媒体にどのようなタイミングでフレームの送信を制御
- 三要素：
  - CS（キャリア　センス）：ケーブル上に信号が流れていないか確認する処理。
    - アイドル：信号が流れていない
    - IFG（Interframe Gap）：フレーム間隔の最小時間
  - MA（Multiple Access:MA、多重アクセス）：すべてのホストに対して送信権利が平等に与えられていること
  - CD（Collision Detection:CD、衝突検出）：2台以上のホストが同時にキャリアセンスして送信開始；
    - ジャム（jam）信号：衝突検出したら、送信を停止し、32ビット長のジャム信号を送信して、衝突カウンタは1増加、すべてのホストに確実に伝える。
    - 衝突カウンタは16になった場合フレームを破棄する。

## リピータハブを使用した10BASE-TにおけるCDMA/CD

略

# ネットワーク機器

## リピータ、ハブ
- リピータ：電気信号を増幅し波形を再生して中継を行う。
- ハブ：リピータの機能を持ち、リピータハブと呼ばれ、受信ポートを除くすべてのポートに信号を中継
- コリジョンドメイン(Collision domain、冲突域): 電気信号の衝突が伝わる範囲のこと

## ブリッジ・スイッチ
- ポジション：MACアドレスを使用してフレームの中継を行うデータリンク層で操作
- ブリッジとスイッチの違い
  - スイッチはマルチポートであり、どのポートにフレームを中継するかまで判断する

## ルータ、レイヤ3スイッチ
- ルータ：IPアドレスなどの論理アドレスを使用してパケットを中継する。
  - ルーティング：パケットのヘッダに含まれる宛先アドレスを基に、ルーティングテーブルを参照し、最適経路を選択してパケットを伝送。
  - 機能：
    - ルーティング
    - 異なるネットワークを相互に接続
    - ブロードキャストドメインを分割
- レイヤ３スイッチ：
  - ルータとの違い
  
|                  | ルータ                     | レイヤ3スイッチ                                                                               |
|------------------|----------------------------|-----------------------------------------------------------------------------------------------|
| 速度             | 低い（ソフトウェア処理）   | 高速（ハードウェア処理、ASIC：application specific integrated circuit、特定用途向け集積回路） |
| インターフェース | イーサネット、シリアルなど | イーサネット                                                                                  |
| ポート単価       | 高い                       | 低い                                                                                          |
| 場所             | WAN                        | 企業内のLANの構築                                                                             |
- ブロードキャストドメイン（广播域）：同じサブネットでブロードキャストできる地域。

# デフォルトゲートウェイ
- 定義：ルータは異なるネットワークへの「出入口」

# レイヤ2スイッチング
## スイッチの基本機能
- MACアドレス学習
- フィルタリング
- 全二重通信
- マイクロセグメンテーション

## MACアドレスの学習
- MACアドレステーブル：MACアドレスとポートの対応表
- シスコの場合：CAMテーブル（Content-Addressable Memory Table）という
- 動的：スイッチ自動MACアドレス学習
    1. スイッチ起動直後（MACアドレステーブルは未学習）
    1. MACアドレス学習：フレームを受信すると、そのNICのMACアドレスを登録する。
    - エージングタイム（Aging time, 老化时间）：動的学習したMACアドレスはエージングタイムだけ保持する。
- 静的：管理者手動でMACアドレスを登録

## フィルタリング
- 定義：宛先MACアドレスがあった場合、そのポートだけ転送する。

## フラッディング（Flooding）
- 定義：宛先MACアドレスがない場合、すべてのポートだけ転送する。
- 場合：宛先MACアドレスが未学習、ブロードキャスト、未学習のマルチキャストフレーム

## 全二重通信(Full duplex)
- 定義：データの送信と受信を双方から同時に行える通信方式
- 必要条件：
  - 双方の機器が全二重通信サポート
  - スイッチポートで接続
  - P2P接続
- マイクロセグメンテーション：１つのスイッチポートにホストを接続してコリジョンドメインを最小分割すること
- オートネゴシエーション（auto-negotiation，自动交涉）
  - 機能：接続された機器の双方でサポートしている通信機能と通信モードを自動的に選択
  - 方法：FLP(Fast Link Pulse，快速连接脉冲)バーストを送出、通信速度と通信モードを含んで交換する
  